# User Stories

분류: Persona 기반 | 우선순위: 사용자 여정 순서 | Acceptance Criteria: 표준 (Given/When/Then 3~5개)

---

## 고객 (Persona: 김민수)

### US-C01: 테이블 자동 로그인
**As a** 고객,
**I want** 테이블에 앉으면 별도 로그인 없이 바로 주문 화면을 볼 수 있기를,
**So that** 대기 없이 즉시 주문을 시작할 수 있다.

**Acceptance Criteria:**
- Given 관리자가 테이블 초기 설정을 완료했을 때, When 태블릿 브라우저를 열면, Then 저장된 정보로 자동 로그인되어 메뉴 화면이 표시된다.
- Given 자동 로그인 정보가 없을 때, When 태블릿 브라우저를 열면, Then 매장 ID/테이블 번호/비밀번호 입력 화면이 표시된다.
- Given 로그인 세션이 만료(16시간)되었을 때, When 페이지에 접근하면, Then 저장된 정보로 자동 재로그인을 시도한다.

**Req Mapping:** FR-C01

---

### US-C02: 메뉴 조회 및 탐색
**As a** 고객,
**I want** 카테고리별로 메뉴를 탐색하고 상세 정보를 확인할 수 있기를,
**So that** 원하는 메뉴를 쉽게 찾아 선택할 수 있다.

**Acceptance Criteria:**
- Given 메뉴 화면에 있을 때, When 카테고리를 선택하면, Then 해당 카테고리의 메뉴 목록이 카드 형태로 표시된다.
- Given 메뉴 목록이 표시될 때, When 메뉴 카드를 보면, Then 메뉴명, 가격, 설명, 이미지가 표시된다.
- Given 다른 카테고리를 보고 싶을 때, When 카테고리 탭을 탭하면, Then 해당 카테고리로 빠르게 이동한다.
- Given 터치 디바이스에서 사용할 때, When 버튼을 탭하면, Then 모든 터치 영역이 최소 44x44px 이상이다.

**Req Mapping:** FR-C02

---

### US-C03: 장바구니 관리
**As a** 고객,
**I want** 주문 전에 선택한 메뉴를 장바구니에서 확인하고 수정할 수 있기를,
**So that** 주문 실수를 방지하고 원하는 대로 주문할 수 있다.

**Acceptance Criteria:**
- Given 메뉴 화면에서 메뉴를 선택할 때, When 메뉴를 장바구니에 추가하면, Then 장바구니에 해당 메뉴가 추가되고 총 금액이 업데이트된다.
- Given 장바구니에 메뉴가 있을 때, When 수량을 변경하면, Then 수량과 총 금액이 즉시 반영된다.
- Given 장바구니에 메뉴가 있을 때, When 메뉴를 삭제하면, Then 해당 메뉴가 제거되고 총 금액이 재계산된다.
- Given 장바구니를 초기화하고 싶을 때, When 장바구니 비우기 버튼을 누르면, Then 모든 메뉴가 제거되고 총 금액이 0이 된다.
- Given 장바구니에 메뉴가 있을 때, When 페이지를 새로고침하면, Then 장바구니 내용이 유지된다 (로컬 저장).

**Req Mapping:** FR-C03

---

### US-C04: 주문 생성
**As a** 고객,
**I want** 장바구니의 메뉴를 확인하고 주문을 확정할 수 있기를,
**So that** 원하는 메뉴를 정확하게 주문할 수 있다.

**Acceptance Criteria:**
- Given 장바구니에 메뉴가 있을 때, When 주문 확정 버튼을 누르면, Then 주문이 서버에 전송되고 주문 번호가 표시된다.
- Given 주문이 성공했을 때, When 주문 완료 화면이 표시되면, Then 장바구니가 비워지고 5초 후 메뉴 화면으로 자동 리다이렉트된다.
- Given 주문이 실패했을 때, When 에러가 발생하면, Then 에러 메시지가 표시되고 장바구니 내용은 유지된다.
- Given 장바구니가 비어있을 때, When 주문 확정 버튼을 보면, Then 버튼이 비활성화 상태이다.

**Req Mapping:** FR-C04

---

### US-C05: 주문 내역 조회
**As a** 고객,
**I want** 현재 테이블에서 주문한 내역과 상태를 확인할 수 있기를,
**So that** 주문이 제대로 접수되었는지, 현재 진행 상태가 어떤지 알 수 있다.

**Acceptance Criteria:**
- Given 주문 내역 화면에 접근할 때, When 주문 목록이 표시되면, Then 현재 테이블 세션의 주문만 시간 순으로 표시된다.
- Given 주문 목록이 표시될 때, When 각 주문을 보면, Then 주문 번호, 시각, 메뉴/수량, 금액, 상태(대기중/준비중/완료)가 표시된다.
- Given 관리자가 주문 상태를 변경했을 때, When SSE 이벤트를 수신하면, Then 해당 주문의 상태가 실시간으로 업데이트된다.
- Given 테이블 이용 완료 처리된 주문이 있을 때, When 주문 내역을 조회하면, Then 이전 세션의 주문은 표시되지 않는다.
- Given 주문 내역이 많을 때, When 목록을 스크롤하면, Then 페이지네이션 또는 무한 스크롤로 추가 주문이 로드된다.

**Req Mapping:** FR-C05

---

## 관리자 (Persona: 박서연)

### US-A01: 매장 인증
**As a** 매장 관리자,
**I want** 매장 관리 시스템에 안전하게 로그인할 수 있기를,
**So that** 매장 운영 기능에 접근할 수 있다.

**Acceptance Criteria:**
- Given 로그인 화면에서, When 매장 ID/사용자명/비밀번호를 입력하고 로그인하면, Then JWT 토큰이 발급되고 관리자 대시보드로 이동한다.
- Given 로그인에 성공했을 때, When 16시간이 경과하면, Then 자동으로 로그아웃되고 로그인 화면으로 이동한다.
- Given 잘못된 인증 정보를 입력했을 때, When 로그인을 시도하면, Then 에러 메시지가 표시되고 시도 횟수가 제한된다.
- Given 로그인 상태에서, When 브라우저를 새로고침하면, Then 세션이 유지된다.

**Req Mapping:** FR-A01

---

### US-A02: 실시간 주문 모니터링
**As a** 매장 관리자,
**I want** 들어오는 주문을 실시간으로 테이블별 대시보드에서 확인할 수 있기를,
**So that** 주문을 빠르게 파악하고 처리할 수 있다.

**Acceptance Criteria:**
- Given 관리자 대시보드에 있을 때, When 고객이 새 주문을 생성하면, Then 2초 이내에 SSE를 통해 해당 테이블 카드에 주문이 표시된다.
- Given 테이블별 카드가 표시될 때, When 카드를 보면, Then 테이블 번호, 총 주문액, 최신 주문 미리보기가 표시된다.
- Given 주문 카드를 클릭할 때, When 상세 보기가 열리면, Then 주문 번호, 주문 시각, 주문 메뉴/수량, 총 금액이 표시된다.
- Given 주문 상태를 변경하고 싶을 때, When 상태 변경 버튼을 누르면, Then 주문 상태가 대기중→준비중→완료로 변경된다.
- Given 신규 주문이 들어왔을 때, When 대시보드에 표시되면, Then 시각적 강조(색상/애니메이션)로 구분된다.
- Given 특정 테이블만 보고 싶을 때, When 테이블별 필터링을 적용하면, Then 선택한 테이블의 주문만 표시된다.

**Req Mapping:** FR-A02

---

### US-A03: 테이블 관리
**As a** 매장 관리자,
**I want** 테이블 설정, 주문 삭제, 이용 완료 처리를 할 수 있기를,
**So that** 테이블 운영을 효율적으로 관리할 수 있다.

**Acceptance Criteria:**
- Given 테이블 초기 설정 시, When 테이블 번호와 비밀번호를 입력하면, Then 테이블이 등록되고 태블릿 자동 로그인이 활성화된다.
- Given 해당 테이블에서 첫 주문이 생성될 때, When 주문이 접수되면, Then 새로운 테이블 세션이 자동으로 시작된다.
- Given 잘못된 주문이 있을 때, When 주문 삭제 버튼을 누르고 확인 팝업에서 확인하면, Then 주문이 삭제되고 테이블 총 주문액이 재계산되며 성공/실패 피드백이 표시된다.
- Given 고객이 식사를 마쳤을 때, When 이용 완료 버튼을 누르고 확인 팝업에서 확인하면, Then 세션이 종료되고 주문 이력이 과거 내역으로 이동하며 테이블이 리셋되고 성공/실패 피드백이 표시된다.
- Given 과거 내역을 확인하고 싶을 때, When 과거 내역 버튼을 누르면, Then 해당 테이블의 과거 주문 목록이 시간 역순으로 표시되며 각 주문에 주문 번호, 시각, 메뉴 목록, 총 금액, 이용 완료 시각이 포함되고 날짜 필터링이 가능하다.

**Req Mapping:** FR-A03

---

### US-A04: 메뉴 관리
**As a** 매장 관리자,
**I want** 메뉴를 등록, 수정, 삭제하고 노출 순서를 조정할 수 있기를,
**So that** 매장 메뉴를 최신 상태로 유지할 수 있다.

**Acceptance Criteria:**
- Given 메뉴 관리 화면에서, When 새 메뉴를 등록하면, Then 메뉴명, 가격, 설명, 카테고리, 이미지 URL이 저장되고 고객 화면에 반영된다.
- Given 기존 메뉴를 수정할 때, When 정보를 변경하고 저장하면, Then 변경 사항이 즉시 반영된다.
- Given 메뉴를 삭제할 때, When 삭제 버튼을 누르고 확인하면, Then 메뉴가 삭제되고 고객 화면에서 제거된다.
- Given 메뉴 노출 순서를 변경하고 싶을 때, When 순서를 조정하면, Then 고객 화면에서 변경된 순서로 메뉴가 표시된다.
- Given 필수 필드가 비어있거나 가격이 유효 범위를 벗어날 때, When 저장을 시도하면, Then 검증 에러 메시지가 표시된다.

**Req Mapping:** FR-A04

---

## 요구사항 커버리지 매핑

| 요구사항 | User Story | Persona |
|----------|-----------|---------|
| FR-C01 | US-C01 | 고객 (김민수) |
| FR-C02 | US-C02 | 고객 (김민수) |
| FR-C03 | US-C03 | 고객 (김민수) |
| FR-C04 | US-C04 | 고객 (김민수) |
| FR-C05 | US-C05 | 고객 (김민수) |
| FR-A01 | US-A01 | 관리자 (박서연) |
| FR-A02 | US-A02 | 관리자 (박서연) |
| FR-A03 | US-A03 | 관리자 (박서연) |
| FR-A04 | US-A04 | 관리자 (박서연) |

모든 기능 요구사항(FR-C01~C05, FR-A01~A04)이 User Story로 커버됨.
